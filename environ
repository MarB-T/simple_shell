#include "headers.h"

extern char **environ;
/**
 * _copyenv - creates a copy of environment
 * Return: pointer to environ copy or NULL if fail
 */

char **_copyenv(void)
{
/*Count the number of environment variables*/
	int count = 0, i = 0;
	char **envp = environ, **newenv;

	while (*envp != NULL)
	{
		count++;
		envp++;
	}

/* Allocate memory for the new environment variable array */
	newenv = (char **) malloc((count + 1) * sizeof(char *));
	if (newenv == NULL)
	{
		perror("malloc");
		exit(1);
	}

/* Copy the environment variables to the new array */
	envp = environ;
	while (*envp != NULL)
	{
		newenv[i] = _strdup(*envp);
		if (newenv[i] == NULL)
		{
			perror("_strdup");
			exit(1);
		}
	envp++;
	i++;
	}
	newenv[i] = NULL;

	return (newenv);
}
